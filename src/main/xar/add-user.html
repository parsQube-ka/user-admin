<?xml version="1.0" encoding="UTF-8"?>
<div xmlns="http://www.w3.org/1999/xhtml" data-template="templates:surround" data-template-with="templates/page.html" data-template-at="content">
    <script>
    function checkPass()
    {
    //Store the password field objects into variables ...
    var pass1 = document.getElementById('password1');
    var pass2 = document.getElementById('password2');
    //Store the Confimation Message Object ...
    var message = document.getElementById('confirmMessage');
    //Set the colors we will be using ...
    var goodColor = "#66cc66";
    var badColor = "#ff6666";
    //Compare the values in the password field 
    //and the confirmation field
    if(pass1.value == pass2.value){
        //The passwords match. 
        //Set the color to the good color and inform
        //the user that they have entered the correct password 
        pass2.style.backgroundColor = goodColor;
        message.style.color = goodColor;
        message.innerHTML = "Passwords Match!";
        document.getElementById('create').style.display = ""
    }else{
        //The passwords do not match.
        //Set the color to the bad color and
        //notify the user.
        pass2.style.backgroundColor = badColor;
        message.style.color = badColor;
        message.innerHTML = "Passwords Do Not Match!";
        document.getElementById('create').style.display = "none"
    }
}
    function checkEmail(){
        var email = document.getElementById('email');
        var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        var message = document.getElementById('checkEmail');
        var goodColor = "#66cc66";
        var badColor = "#ff6666";
        
        if(email.value == '' || filter.test(email.value)){
            email.style.backgroundColor = goodColor;
            message.style.color = goodColor;
            message.innerHTML = "Valid E-mail address!";
            document.getElementById('create').style.display = ""
        }else{
            email.style.backgroundColor = badColor;
            message.style.color = badColor;
            message.innerHTML = "invalid E-mail address!";
            document.getElementById('create').style.display = "none"
        }
    }
    </script>
    <form method="post" action="create-user.html">
        <div class="col-md-4">
            <div class="alert alert-info">
                <p>All fields with * are required</p>
            </div>
            <div class="form-group">
                <label for="username">*Username:</label>
                <input type="text" name="username" id="username" class="form-control" placeholder="username" required="required"/>
            </div>
            <div class="form-group">
                <label for="password1">Password:</label>
                <input type="password" name="password1" id="password1" class="form-control" placeholder="password" onfocus="checkPass(); return false;" onkeyup="checkPass(); return false;"/>
                <label for="password2">Confirm your password:</label>
                <input type="password" name="password2" id="password2" class="form-control" placeholder="confirm your password" onfocus="checkPass(); return false;" onkeyup="checkPass(); return false;"/>
                <span id="confirmMessage" class="confirmMessage"/>
            </div>
            <div class="form-group">
                <label for="usergroup">User primary group:</label>
                <select data-template="user:primary-group">select group here</select>
            </div>
            <div class="form-group">
                <label for="usergroups">Other available groups:</label>
                <select data-template="user:list-groups">select groups here</select>
            </div>
        </div>
        <div class="col-md-1"/>
        <div class="col-md-4">
            <div class="form-group">
                <label for="firstname">Firstname:</label>
                <input type="text" name="firstname" id="firstname" class="form-control" placeholder="firstname"/>
                <label for="lastname">Lastname:</label>
                <input type="text" name="lastname" id="lastname" class="form-control" placeholder="lastname"/>
                <label for="fullname">Fullname:</label>
                <input type="text" name="fullname" id="fullname" class="form-control" placeholder="fullname"/>
            </div>
            <div class="form-group">
                <label for="email">E-Mail:</label>
                <input type="text" name="email" id="email" class="form-control" placeholder="email" onkeyup="checkEmail(); return false;" onfocus="checkEmail(); return false;"/>
                <span id="checkEmail" class="checkEmail"/>
            </div>
            <div class="form-group">
                <label for="language">Language:</label>
                <select class="form-control input-sm" name="language" id="language" data-template="user:get-all-languages"/>
                <label for="timezone">Timezone:</label>
                <select class="form-control input-sm" name="timezone" id="timezone" data-template="user:get-all-timezones"/>
            </div>
            <div class="form-group">
                <label for="description">Description:</label>
                <textarea class="form-control" name="description" id="description" placeholder="This person is lazy, who has no description left."/>
            </div>
        </div>
        <div class="row col-md-9 text-center">
            <button class="btn btn-primary" id="create" name="create" type="submit">Create</button>
            <a href="list-users.html" class="btn btn-info" style="margin-left: 10px" role="button">Cancel</a>
        </div>
    </form>
</div>